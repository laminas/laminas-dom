<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="laminas-dom">  
    <link rel="canonical" href="https://docs.laminas.dev/laminas-dom/query/">
    <link rel="shortcut icon" href="https://docs.laminas.dev/img/trademark-laminas-foundation-rgb.svg">

    <title>Querying HTML and XML - laminas-dom - Laminas Docs</title>

    <link rel="stylesheet" href="https://docs.laminas.dev/css/styles.css">
    
</head>
<body id="page-top" class="components" data-spy="scroll" data-target=".toc" data-offset="20">

    
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
        
        <a class="logo-link navbar-brand" href="https://getlaminas.org/" data-tooltip data-placement="bottom" title="Go to the Laminas homepage">
            <img src="https://docs.laminas.dev/img/laminas-foundation-white.svg" height="28" alt="Laminas">
        </a>
        <a class="navbar-title" href="https://docs.laminas.dev/" data-tooltip data-placement="bottom" title="Go to the Laminas Documentation">
            Documentation
        </a>

        
        <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">

            
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <div class="dropdown sub-project-selector">
                        <a class="dropdown-toggle nav-link" data-toggle="dropdown" aria-expanded="false">
                            All Docs
                        </a>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                            <a href="https://docs.mezzio.dev/" class="dropdown-item">
                                <div class="row align-items-center">
                                    <div class="col-md-4 col-sm-12">
                                        <img src="https://docs.laminas.dev/img/laminas-mezzio-rgb.svg">
                                    </div>
                                    <div class="col-md-8 col-sm-12">
                                        <strong>Mezzio</strong><br>
                                        PSR-15 Middleware in Minutes
                                    </div>
                                </div>
                            </a>
                            <a href="https://docs.laminas.dev/components/" class="dropdown-item">
                                <div class="row align-items-center">
                                    <div class="col-md-4 col-sm-12">
                                        <img src="https://docs.laminas.dev/img/laminas-components-rgb.svg">
                                    </div>
                                    <div class="col-md-8 col-sm-12">
                                        <strong>Components</strong><br>
                                        Components for Enterprise Applications
                                    </div>
                                </div>
                            </a>
                            <a href="https://docs.laminas.dev/mvc" class="dropdown-item">
                                <div class="row align-items-center">
                                    <div class="col-md-4 col-sm-12">
                                        <img src="https://docs.laminas.dev/img/laminas-mvc-rgb.svg">
                                    </div>
                                    <div class="col-md-8 col-sm-12">
                                        <strong>MVC</strong><br>
                                        MVC for Enterprise Applications
                                    </div>
                                </div>
                            </a>
                            <a href="https://api-tools.getlaminas.org/documentation" class="dropdown-item">
                                <div class="row align-items-center">
                                    <div class="col-md-4 col-sm-12">
                                        <img src="https://docs.laminas.dev/img/laminas-api-tools-rgb.svg">
                                    </div>
                                    <div class="col-md-8 col-sm-12">
                                        <strong>API Tools</strong><br>
                                        Build RESTful APIs in Minutes
                                    </div>
                                </div>
                            </a>
                            <div class="dropdown-divider"></div>
                            <a class="dropdown-item dropdown-item--secondardy" href="https://docs.laminas.dev/migration/">
                                <div class="row align-items-center">
                                    <div class="col-md-8 offset-md-4 col-sm-12">
                                        Migration to Laminas
                                    </div>
                                </div>
                            </a>
                            <a class="dropdown-item dropdown-item--secondardy" href="https://docs.laminas.dev/tutorials/">
                                <div class="row align-items-center">
                                    <div class="col-md-8 offset-md-4 col-sm-12">
                                        Tutorials
                                    </div>
                                </div>
                            </a>
                        </div>
                    </div>
                </li>
                <li class="nav-item">
                    <a href="https://getlaminas.org/participate" class="nav-link">Community</a>
                </li>
            </ul>

            
            
                <div class="d-block d-sm-none">
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="..">laminas-dom</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../intro/" class="subnavigation__link">Intro</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item subnavigation__list-item--active">
                                <a href="./" class="subnavigation__link">Querying HTML and XML</a>
                            </li>
                        
                    
                
            
        </ul>
    </div>

                </div>
            

            
            <div class="d-block d-sm-none">
                <div class="component-selector">
    
    <h5 class="component-selector__subtitle">Find documentation…</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
            </div>
        </div>
    </div>
</nav>

    
    <header class="header">
    <div class="container">
        <div class="row">

            
            <div class="col-8">
                <h1 class="header__title">
                    Components

                    
                        <small class="header__subtitle">laminas-dom</small>
                    
                </h1>
            </div>

            
            <div class="col-4 text-sm-right">
                
                    

                    <a href="#" class="header__link header__link--search" data-toggle="modal" data-target="#mkdocs_search_modal" title="Open search">
                        <i class="fa fa-search"></i> Search
                    </a>
                    <a href="https://github.com/laminas/laminas-dom/" class="header__link header__link--github" title="Go to repository of laminas-dom">
                        <i class="fa fa-github"></i> GitHub
                    </a>
                
            </div>
        </div>
    </div>
</header>

    
    <div class="container">
        <div class="row">
            <div class="col-md-9 col-sm-12 content" role="main">
                
                
                    
    

    
    
        <div class="toc">
            <h6 class="toc__headline">On this page</h6>
            <ul class="toc__list">
                
                    <li class="toc__entry">
                        <a href="#theory-of-operation" class="toc__link nav-link">Theory of Operation</a>
                    </li>
                
                    <li class="toc__entry">
                        <a href="#methods-available" class="toc__link nav-link">Methods Available</a>
                    </li>
                
            </ul>
        </div>
    

                

                
                    <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        
            <li class="breadcrumb-item"><a href="https://docs.laminas.dev/">Overview</a></li>
            <li class="breadcrumb-item"><a href="https://docs.laminas.dev/components/">Components</a></li>

            
                <li class="breadcrumb-item"><a href="..">laminas-dom</a></li>

                

                <li class="breadcrumb-item active" aria-current="page">Querying HTML and XML</li>
            
        
    </ol>
</nav>






    
    

    <h1 id="querying-html-and-xml-documents">Querying HTML and XML Documents</h1>
<p><code>Laminas\Dom\Query</code> provides mechanisms for querying XML and HTML documents
utilizing either XPath or CSS selectors. It was developed to aid with functional
testing of MVC applications, but could also be used for development of screen
scrapers.</p>
<p>CSS selector notation is provided as a simpler and more familiar notation for
web developers to utilize when querying documents with XML structures. The
notation should be familiar to anybody who has developed Cascading Style Sheets
or who utilizes javascript toolkits that provide functionality for selecting
nodes utilizing CSS selectors.  <a href="http://prototypejs.org/api/utility/dollar-dollar">Prototype's $$()</a>,
<a href="http://api.dojotoolkit.org/jsdoc/dojo/HEAD/dojo.query">Dojo's dojo.query</a>, and
<a href="https://jquery.com">jQuery</a> were all inspirations for the component.</p>
<h2 id="theory-of-operation">Theory of Operation</h2>
<p>To use <code>Laminas\Dom\Query</code>, you instantiate a <code>Laminas\Dom\Query</code> object, optionally
passing a document to query (a string). Once you have a document, you can use
either the <code>execute()</code> or <code>queryXpath()</code> methods; each method will return a
<code>Laminas\Dom\NodeList</code> object with any matching nodes.</p>
<p>The primary difference between <code>Laminas\Dom\Query</code> and using
<a href="http://php.net/domdocument">DOMDocument</a> + <a href="http://php.net/domxpath">DOMXPath</a>
is the ability to select against CSS + selectors. You can utilize any of the
following, in any combination:</p>
<ul>
<li><strong>element types</strong>: provide an element type to match: <code>div</code>, <code>a</code>, <code>span</code>, <code>h2</code>, etc.</li>
<li><strong>style attributes</strong>: CSS style attributes to match: <code>.error</code>, <code>div.error</code>,
  <code>label.required</code>, etc. If an element defines more than one style, this will
  match as long as the named style is present anywhere in the style declaration.</li>
<li><strong>id attributes</strong>: element ID attributes to match: <code>#content</code>, <code>div#nav</code>, etc.</li>
<li><strong>arbitrary attributes</strong>: arbitrary element attributes to match. Three
  different types of matching are provided:<ul>
<li><strong>exact match</strong>: the attribute <em>exactly</em> matches the specified string.
  <code>div[bar="baz"]</code> would match a <code>div</code> element with a <code>bar</code> attribute that
  exactly matches the value <code>baz</code>.</li>
<li><strong>word match</strong>: the attribute contains a <em>word</em> matching the string.
  <code>div[bar~="baz"]</code> would match a <code>div</code> element with a <code>bar</code> attribute that
  contains the word <code>baz</code>. <code>&lt;div bar="foo baz"&gt;</code> would match, but
  <code>&lt;div bar="foo bazbat"&gt;</code> would not.</li>
<li><strong>substring match</strong>: the attribute contains the string specified, whether or
  not it is a complete word. <code>div[bar*="baz"]</code> would match a <code>div</code> element
  with a <code>bar</code> attribute that contains the string <code>baz</code> anywhere within it.</li>
</ul>
</li>
<li><strong>direct descendents</strong>: utilize <code>&gt;</code> between selectors to denote direct
  descendents. <code>div &gt; span</code> would select only <code>span</code> elements that are direct
  descendents of a <code>div</code>. Can also be used with any of the selectors above.</li>
<li>
<p><strong>descendents</strong>: string together multiple selectors to indicate a hierarchy along which to search.
  <code>div .foo span #one</code> would select an element of id <code>one</code> that is a descendent
  of arbitrary depth beneath a <code>span</code> element, which is in turn a descendent of
  arbitrary depth beneath an element with a class of <code>foo</code>, that is an
  descendent of arbitrary depth beneath a <code>div</code> element. For example, it would
  match the link to the word 'One' in the listing below:</p>
<p><code>html
&lt;div&gt;
&lt;table&gt;
    &lt;tr&gt;
        &lt;td class="foo"&gt;
            &lt;div&gt;
                Lorem ipsum &lt;span class="bar"&gt;
                    &lt;a href="/foo/bar" id="one"&gt;One&lt;/a&gt;
                    &lt;a href="/foo/baz" id="two"&gt;Two&lt;/a&gt;
                    &lt;a href="/foo/bat" id="three"&gt;Three&lt;/a&gt;
                    &lt;a href="/foo/bla" id="four"&gt;Four&lt;/a&gt;
                &lt;/span&gt;
            &lt;/div&gt;
        &lt;/td&gt;
    &lt;/tr&gt;
&lt;/table&gt;
&lt;/div&gt;</code></p>
</li>
</ul>
<p>Once you've performed your query, you can then work with the result object to
determine information about the nodes, as well as to pull them and/or their
content directly for examination and manipulation. <code>Laminas\Dom\NodeList</code>
implements <code>Countable</code> and <code>Iterator</code>, and stores the results internally as a
<a href="http://php.net/domdocument">DOMDocument</a> and <a href="http://php.net/domnodelist">DOMNodeList</a>.</p>
<p>As an example, consider the following call, that selects against the HTML above:</p>
<pre class=codehilite><code class=language-php>use Laminas\Dom\Query;

$dom = new Query($html);
$results = $dom-&gt;execute('.foo .bar a');

$count = count($results); // get number of matches: 4
foreach ($results as $result) {
    // $result is a DOMElement
}</code></pre>
<p><code>Laminas\Dom\Query</code> also allows straight XPath queries utilizing the <code>queryXpath()</code>
method; you can pass any valid XPath query to this method, and it will return a
<code>Laminas\Dom\NodeList</code> object.</p>
<h2 id="methods-available">Methods Available</h2>
<p>Below is a listing of methods available in the various classes exposed by
laminas-dom.</p>
<h3>Laminas\Dom\Query</h3>
<p>The following methods are available to <code>Laminas\Dom\Query</code>:</p>
<ul>
<li><code>setDocumentXml($document, $encoding = null)</code>: specify an XML string to query against.</li>
<li><code>setDocumentXhtml($document, $encoding = null)</code>: specify an XHTML string to query against.</li>
<li><code>setDocumentHtml($document, $encoding = null)</code>: specify an HTML string to query against.</li>
<li><code>setDocument($document, $encoding = null)</code>: specify a string to query against;
  <code>Laminas\Dom\Query</code> will then attempt to autodetect the document type.</li>
<li><code>setEncoding($encoding)</code>: specify an encoding string to use. This encoding
  will be passed to <a href="http://php.net/domdocument.construct">DOMDocument's constructor</a>
  if specified.</li>
<li><code>getDocument()</code>: retrieve the original document string provided to the object.</li>
<li><code>getDocumentType()</code>: retrieve the document type of the document provided to
  the object; will be one of the <code>DOC_XML</code>, <code>DOC_XHTML</code>, or <code>DOC_HTML</code> class
  constants.</li>
<li><code>getEncoding()</code>: retrieves the specified encoding.</li>
<li><code>execute($query)</code>: query the document using CSS selector notation.</li>
<li><code>queryXpath($xPathQuery)</code>: query the document using XPath notation.</li>
</ul>
<h3>Laminas\Dom\NodeList</h3>
<p>As mentioned previously, <code>Laminas\Dom\NodeList</code> implements both <code>Iterator</code> and
<code>Countable</code>, and as such can be used in a <code>foreach()</code> loop as well as with the
<code>count()</code> function. Additionally, it exposes the following methods:</p>
<ul>
<li><code>getCssQuery()</code>: return the CSS selector query used to produce the result (if
  any).</li>
<li><code>getXpathQuery()</code>: return the XPath query used to produce the result.
  Internally, <code>Laminas\Dom\Query</code> converts CSS selector queries to XPath, so this
  value will always be populated.</li>
<li><code>getDocument()</code>: retrieve the DOMDocument the selection was made against.</li>
</ul>




    <nav>
    <ul class="page-nav hidden-print">

        
        <li class="page-nav__item">
            
                <a rel="prev" class="page-nav__link page-nav__link--prev" href="../intro/">
                    <i class="fa fa-chevron-left"></i> Previous
                </a>
            
        </li>

        
        <li class="page-nav__item">
            
        </li>
    </ul>
</nav>




    <div class="help-wanted">
        <p>
            Found a mistake or want to contribute to the documentation?
            <a href="https://github.com/laminas/laminas-dom/edit/master/docs/book/query.md" target="_blank" class="help-wanted__link">
                Edit this page on GitHub!
            </a>
        </p>
    </div>

                
            </div>
            <div class="col-md-3 col-sm-12 sidebar">
                
                    <div class="component-selector">
    
    <h5 class="component-selector__subtitle">Find documentation…</h5>
    <select class="form-control component-selector__control">
        <option value="/">Overview</option>
        <optgroup label="Components"></optgroup>
    </select>
</div>
                    
    <div class="subnavigation hidden-print">
        <h4 class="subnavigation__title">
            <a href="..">laminas-dom</a>
        </h4>

        <h5 class="subnavigation__subtitle">Table of Contents</h5>

        <ul class="subnavigation__list">
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item ">
                                <a href="../intro/" class="subnavigation__link">Intro</a>
                            </li>
                        
                    
                
            

                
                

                    
                    
                        
                            <li class="subnavigation__list-item subnavigation__list-item--active">
                                <a href="./" class="subnavigation__link">Querying HTML and XML</a>
                            </li>
                        
                    
                
            
        </ul>
    </div>

                
            </div>
        </div>
    </div>

    
    <footer class="footer">
    <div class="container">

        
        <div class="row">
            <div class="col-md-12 text-center">
                <a class="footer__button" href="#page-top"><i class="fa fa-chevron-up" aria-hidden="true"></i></a>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <h5>Laminas</h5>
                <ul>
                    <li>Laminas Project <a href="https://getlaminas.org/">The new foundation for the community-supported, open source continuation of Zend Framework</a></li>
                    <li>Laminas Components and MVC <a href="https://docs.laminas.dev/">Components and MVC for enterprise applications</a></li>
                    <li>Mezzio <a href="https://docs.mezzio.dev/">PSR-15 middleware in minutes</a></li>
                    <li>Laminas API Tools <a href="https://api-tools.getlaminas.org/">Build RESTful APIs in minutes</a></li>
                </ul>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <div class="row">

                    
                    <div class="col-md-4">
                        <h4 class="footer__headline">Support</h4>
                        <ul class="support__list">
                            <li class="support__list-item">
                                <a href="https://discourse.laminas.dev" class="support__link" title="Forum"><i class="fa fa-comments"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://laminas.dev/chat" class="support__link" title="Chat"><i class="fa fa-slack"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://github.com/laminas" class="support__link" title="Github"><i class="fa fa-github"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://twitter.com/getlaminas" class="support__link" title="Twitter"><i class="fa fa-twitter"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://getlaminas.org/blog/feed-rss.xml" class="support__link" title="Blog feed"><i class="fa fa-rss"></i></a>
                            </li>
                            <li class="support__list-item">
                                <a href="https://getlaminas.org/security/feed" class="support__link" title="Security feed"><i class="fa fa-rss-square"></i></a>
                            </li>
                        </ul>
                    </div>

                    
                    <div class="col-md-4">
                        <h4 class="footer__headline">License</h4>
                        <p>
                            Code licensed under <a
                                href="https://github.com/laminas/laminas-dom/blob/master/LICENSE.md">BSD 3-Clause</a>.
                        </p>
                    </div>

                    
                    <div class="col-md-4">
                        <h4 class="footer__headline">Copyright</h4>
                        <p>
                            <!--Built with love by the Laminas team with the help of our
                            <a href="https://github.com/laminas/laminas-dom/graphs/contributors">contributors</a>.<br>-->
                            &copy; 2019-2020 by <a href="https://getlaminas.org/">The Laminas Project</a>.
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>

    <script>
        let base_url = '..',
            project  = "components",
            siteName = 'laminas-dom';
    </script>
    <script src="https://docs.laminas.dev/js/scripts.js"></script>
    
        <script src="../search/main.js"></script>
    

    
    <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Search</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                    <span class="sr-only">Close</span>
                </button>
            </div>
            <div class="modal-body">
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search in laminas-dom" id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
        </div>
    </div>
</div>
</body>


</html>
